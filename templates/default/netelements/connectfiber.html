<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!--// $Id$ //-->
<html>
<head>
    <meta name="GENERATOR" content="LMS {$layout.lmsv}">
    <meta http-equiv="Content-Language" content="{$LANGDEFS.$_ui_language.html}">
    <meta http-equiv="Content-Type" content="text/html; charset={$LANGDEFS.$_ui_language.charset}">
    <title>::: LMS :{if $layout.pagetitle != ""} {$layout.pagetitle} :{/if}::</title>
    <link href="img/style.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="img/common.js"></script>
    {$xajax}
</head>
<body class="light">
<div id="overDiv" style="position: absolute; visibility: hidden; z-index: 100;"></div>
<script type="text/javascript" language="JavaScript" src="img/overlib.js"></script>
	<FORM id="connect" name="connect" method="GET">
	<input type="hidden" name="wireid" value="{$wireid}">
	<input type="hidden" id="validated" name="validated" value="0">
	<table id="propertiestable" style="width: 100%;" cellpadding="3">
		{assign "typelist" ""}
		{assign "elemlist" ""}
		{foreach from=$connlist key=type item=netelem}
		{assign var="typelist1" value="`$typelist`,`$type`"}{assign var="typelist" value="`$typelist1`"}
		{foreach from=$netelem key=elemid item=$element}
		{assign var="elemlist1" value="`$elemlist`,`$element.id`"}{assign var="elemlist" value="`$elemlist1`"}
		{/foreach}
		{/foreach}
		<tr class="light">
			<td style="width: 1%; white-space: nowrap;"><b>{trans("Type:")}</b></td>
			<td style="width: 99%;"> <select id="type" name="type" {tip text="Select element type to connect"} style="width: 100%;" onchange="xajax_changeType(this.value,'{$typelist}');xajax_changeNetElem(0,'{$elemlist}')">
				<option value="-1" SELECTED>{trans("Select element type to connect")}</option>
				{foreach from=$connlist key=type item=netelem}
				<option value="{$type}">{$_NETELEMENTTYPES[$type]}</option>
				{/foreach}
				</select>
			</td>
		</tr>
		{foreach from=$connlist key=type item=netelem}
		<tr class="lucida" id="level1_{$type}" style="display:none;">
			<td class="nobr"><b>{trans("Select element:")}</b></td>
			<td><SELECT id="netelement_{$type}" name="netelement_{$type}" style="width: 100%;" {tip text="Select element"} onchange="xajax_changeNetElem(this.value,'{$elemlist}')">
			<option value="-1" SELECTED>{trans("Select network element")}</option>
			{foreach from=$netelem key=elemid item=$element}
				{if $element.ports or $element.wires}<option value="{$element.id}">{$element.name}</option>{/if}
			{/foreach}
			</select></td>
		</tr>
			{foreach from=$netelem key=elemid item=$element}
			<tr class="light" id="level2_{$element.id}"  style="display:none;">
				<td class="nobr"><b>{if $type==2}{trans("Select wire:")}{else}{trans("Select port:")}{/if}</b></td>
				{if $element.ports}
				<td><SELECT id="port_{$element.id}" name="port_{$element.id}" style="width: 100%;" {tip text="Select destination port"}>
				<option value="-1" SELECTED>{trans("Select port:")}</option>
				{foreach from=$element.ports key=pid item=port}
				<option value="{$port.id}">{$port.label}</option>
				{/foreach}
				{elseif $element.wires}
				<td><SELECT id="wire_{$element.id}" name="wire_{$element.id}" style="width: 100%;" {tip text="Select destination wire"}>
				<option value="-1">{trans("Select wire:")}</option>
				{foreach from=$element.wires key=wid item=wire}
				<option value="{$wire.id}">#{$wire.bundle} #{$wire.wire}</option>
				{/foreach}
				{/if}
				</select></td>
			</tr>
			{/foreach}
		{/foreach}
		<tr class="light" id="level3" style="display:none;">
			<td class="nobr"><b>{trans("Select tray for splice:")}</b></td>
			<td><SELECT id="tray" name="tray" style="width: 100%;" {tip text="Select tray for splice"}>
			<option value="-1">{trans("Select tray:")}</option>
			{foreach from=$connlist[1] item=$element}
			{if $element.trays}
				{foreach from=$element.trays item=tray}
				<option value="{$tray.id}">{$element.name} / {$tray.label} </option>
				{/foreach}
			{/if}
			{/foreach}
			</select></td>
		</tr>
		<tr class="light" id="level4" style="display:none;">
			<td class="nobr"><b>{trans("Parameter for connection:")}</b></td>
			<td><input style="width: 100%" type="text" id="parameter" name="parameter" value="" {tip text="Enter parameter for connection"}></td>
		</tr>
		<tr class="light" id="level5" style="display:none;">
			<td class="nobr"><b>{trans("Description for connection:")}</b></td>
			<td><input style="width: 100%" type="text" id="description" name="description" value="" {tip text="Enter description for connection"}></td>
		</tr>
		<tr class="light" id="level6" style="display:none;">
			<td colspan="2" style="text-align: right; white-space: nowrap;">
				<a href="javascript:submit_connect();" accesskey="s">{trans("Submit")} <img src="img/save.gif" alt=""></a>
			</td>
		</tr>
	</table>
	</FORM>

<script type="text/javascript">
<!--

function update_info(content1, content2) {
	window.parent.location.reload();
        window.parent.popclick();
}

function submit_connect() {
	xajax_validateConnect(xajax.getFormValues('connect'));
}

function resize_frame() {
	var pt = xjx.$('propertiestable'), h = pt.offsetHeight; autoiframe_setsize('autoiframe', 450, Math.max(h, 10));
}

resize_frame();
//-->
</script>


</body>
</html>
